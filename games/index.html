<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>First Line Stats</title>
        <!-- Bootstrap core CSS -->
        <link rel='shortcut icon' type='image/x-icon' href="/static/images/favicon.png" />
        <!--{% block page_css %}-->
        <link href="/static/DataTables/datatables.min.css" rel="stylesheet">
        <link href="/static/MultiSelect/css/multi-select.css" rel="stylesheet">
        <link href="/static/datepicker/css/datepicker.css" rel="stylesheet">
        <!--{% endblock %}-->
        <link href="/static/css/bootstrap.css" rel="stylesheet">
        <link href="/static/css/fls.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    </head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <div class="navbar-brand" href="#">
                        <a href="/"><img class="fls-logo" src="/static/images/logo_text.png"></a>
                    </div>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Players <span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="/players/skaters">Skaters</a></li>
                                <li><a href="/players/goalies">Goalies</a></li>
                            </ul>
                        </li>
                        <li><a href="/teams">Teams</a></li>
                        <li class="active"><a href="/games">Games</a></li>
                        <li><a href="/about">About Us</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!--{% block content %}-->
        <div class="container">
            <h1>Games</h1>
            <br />
            <div class="row">
                <div class="col-md-12">
                    <div class="well bs-component">
                        <form id="gamesFilter">
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="id_teams">Only Games Involving:</label>
                                    <select multiple="multiple" id="id_teams" name="teams">
                                        <option value="21">Avalanche</option>
                                        <option value="16">Blackhawks</option>
                                        <option value="29">Blue Jackets</option>
                                        <option value="19">Blues</option>
                                        <option value="6">Bruins</option>
                                        <option value="8">Canadiens</option>
                                        <option value="23">Canucks</option>
                                        <option value="15">Capitals</option>
                                        <option value="53">Coyotes</option>
                                        <option value="1">Devils</option>
                                        <option value="24">Ducks</option>
                                        <option value="20">Flames</option>
                                        <option value="4">Flyers</option>
                                        <option value="12">Hurricanes</option>
                                        <option value="2">Islanders</option>
                                        <option value="52">Jets</option>
                                        <option value="26">Kings</option>
                                        <option value="14">Lightning</option>
                                        <option value="10">Maple Leafs</option>
                                        <option value="22">Oilers</option>
                                        <option value="13">Panthers</option>
                                        <option value="5">Penguins</option>
                                        <option value="18">Predators</option>
                                        <option value="3">Rangers</option>
                                        <option value="17">Red Wings</option>
                                        <option value="7">Sabres</option>
                                        <option value="9">Senators</option>
                                        <option value="28">Sharks</option>
                                        <option value="25">Stars</option>
                                        <option value="30">Wild</option>
                                    </select>
                                    <br />
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label for="id_date_start">Start Date:</label>
                                            <input class="form-control input-sm datepicker" id="id_date_start" name="date_start" type="text" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label for="id_seasons">Specify Seasons:</label>
                                    <select multiple="multiple" class="form-control input-sm" id="id_seasons" name="seasons">
                                        <option value="20152016">20152016</option>
                                    </select>
                                    <br />
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label for="id_date_end">End Date:</label>
                                            <input class="form-control input-sm datepicker" id="id_date_end" name="date_end" type="text" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label for="id_venues">Specify Venues:</label>
                                            <select multiple="multiple" id="id_venues" name="venues">
                                                <option value="Air Canada Centre">Air Canada Centre</option>
                                                <option value="Amalie Arena">Amalie Arena</option>
                                                <option value="American Airlines Center">American Airlines Center</option>
                                                <option value="Barclays Center">Barclays Center</option>
                                                <option value="BB&amp;T Center">BB&amp;T Center</option>
                                                <option value="Bridgestone Arena">Bridgestone Arena</option>
                                                <option value="Canadian Tire Centre">Canadian Tire Centre</option>
                                                <option value="Centre Bell">Centre Bell</option>
                                                <option value="CONSOL Energy Center">CONSOL Energy Center</option>
                                                <option value="Coors Field">Coors Field</option>
                                                <option value="First Niagara Center">First Niagara Center</option>
                                                <option value="Gila River Arena">Gila River Arena</option>
                                                <option value="Gillette Stadium">Gillette Stadium</option>
                                                <option value="Honda Center">Honda Center</option>
                                                <option value="Joe Louis Arena">Joe Louis Arena</option>
                                                <option value="Madison Square Garden">Madison Square Garden</option>
                                                <option value="MTS Centre">MTS Centre</option>
                                                <option value="Nationwide Arena">Nationwide Arena</option>
                                                <option value="Pepsi Center">Pepsi Center</option>
                                                <option value="PNC Arena">PNC Arena</option>
                                                <option value="Prudential Center">Prudential Center</option>
                                                <option value="Rexall Place">Rexall Place</option>
                                                <option value="Rogers Arena">Rogers Arena</option>
                                                <option value="SAP Center at San Jose">SAP Center at San Jose</option>
                                                <option value="Scotiabank Saddledome">Scotiabank Saddledome</option>
                                                <option value="Scottrade Center">Scottrade Center</option>
                                                <option value="STAPLES Center">STAPLES Center</option>
                                                <option value="TCF Bank Stadium">TCF Bank Stadium</option>
                                                <option value="TD Garden">TD Garden</option>
                                                <option value="United Center">United Center</option>
                                                <option value="Verizon Center">Verizon Center</option>
                                                <option value="Wells Fargo Center">Wells Fargo Center</option>
                                                <option value="Xcel Energy Center">Xcel Energy Center</option>
                                            </select>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group session-checkbox">
                                                <label for="id_game_type_0">Game Types:</label>
                                                <ul id="id_game_type"><li><label for="id_game_type_0"><input checked="checked" class="game-type-checkbox" id="id_game_type_0" name="game_type" type="checkbox" value="PR" /> Pre-season</label></li>
                                                <li><label for="id_game_type_1"><input checked="checked" class="game-type-checkbox" id="id_game_type_1" name="game_type" type="checkbox" value="R" /> Regular season</label></li>
                                                <li><label for="id_game_type_2"><input checked="checked" class="game-type-checkbox" id="id_game_type_2" name="game_type" type="checkbox" value="P" /> Playoffs</label></li>
                                                <li><label for="id_game_type_3"><input checked="checked" class="game-type-checkbox" id="id_game_type_3" name="game_type" type="checkbox" value="A" /> All-Star game</label></li></ul>
                                            </div>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group text-right">
                                                <input type="reset" class="btn btn-danger btn-sm"></input>
                                                <input type="submit" href="#" class="btn btn-primary btn-sm"></input>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
            <br />
            <div class="row">
                <div id='tableLoading' class="col-md-6 col-md-offset-3">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped active" role="progressbar"
                            aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                            Fetching Data
                        </div>
                    </div>
                </div>
                <div id="gamesTableContainer" class="col-md-12" style="display: none">
                    <table id="gameList" class="table table-striped table-hover ">
                        <thead>
                            <tr>
                                <th>Game Date</th>
                                <th>Session</th>
                                <th>Home</th>
                                <th>Score</th>
                                <th>Away</th>
                                <th>Corsi</th>
                                <th>Status</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                            </tr>
                        </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        
        
    </div>
    <!--{% endblock %}-->
    <script src="/static/js/jquery-2.2.0.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <!--{% block page_js %}-->
    <script src="/static/DataTables/datatables.min.js"></script>
    <script src="/static/MultiSelect/js/jquery.multi-select.js"></script>
    <script src="/static/datepicker/js/bootstrap-datepicker.js"></script>
    <script src="/static/js/getUrl.js"></script>
    <script>
        var gamesDT;
        var url = getUrl();
        $(document).ready(function() {
            $('#gamesSelect').multiSelect();
            $('#id_teams').multiSelect();
            $('#id_seasons').multiSelect();
            $('#id_venues').multiSelect();
            $('.datepicker').datepicker();
            getAjax();
            $('input[type=reset]').click(function(e) {
                $("#id_seasons").multiSelect('deselect_all');
                $("#id_teams").multiSelect('deselect_all');
                $("#id_venues").multiSelect('deselect_all');
            });
            $('#gamesFilter').submit(function(e) {
                $('#gamesTableContainer').toggle();
                $('#tableLoading').toggle();
                //getAjax();
                var formurl = url + "pbp/games/?format=json&" + $("#gamesFilter").serialize();
                console.log(formurl);
                gamesDT.ajax.url(formurl);
                gamesDT.ajax.reload();

                e.preventDefault();
            });
        });
   
       

        function getAjax() {
            
            gamesDT = $('#gameList').DataTable({
                order: [[ 0, "desc" ]],
                iDisplayLength: 15,
                responsive: true,
                aLengthMenu: [
                    [10, 15, 25, 50, -1],
                    [10, 15, 25, 50, "All"]
                ],
                fixedHeader: {
                    header: true,
                },
                ajax: url + "pbp/games/?format=json",
                sAjaxDataProp: "",
                "oLanguage": {
                    "sProcessing": "loading data..."
                },
                columns: [{
                    "data": "date",
                    "render": function(data, type, full, meta) {
                        return "<a href=\"/game/?gamePk=" + full.gamePk + "\">" + full.date + "</a>";
                    }
                }, {
                    "data": "gameType"
                }, {
                    "data": "homeTeam",
                    "render": function(data, type, full, meta) {
                        return '<img height="17" width="17" src="/static/images/team/' + data.abbreviation + '.png"><a href="/teams">' + data.name + '</a>';
                    }
                }, {
                    "data": "score"
                }, {
                    "data": "awayTeam",
                    "render": function(data, type, full, meta) {
                        return '<img height="17" width="17" src="/static/images/team/' + data.abbreviation + '.png"><a href="/teams">' + data.name + '</a>';
                    }
                }, {
                    "data": "corsi"
                }, {
                    "data": "gameState"
                }, {
                    "data": "dateTime"
                }, {
                    "data": "endDateTime"
                }, ]
            });
            $('#gameList').on('xhr.dt', function() {
                $('#gameList').width('100%')
                $('#gamesTableContainer').toggle();
                $('#tableLoading').toggle();
            });

        }
    </script>
    <!--{% endblock %}-->
</body>
</html>